# 01背包问题求解过程（表格示例说明）

以下通过表格详细展示二维数组解法和一维数组解法的具体计算步骤，以“4件物品、背包容量5”为例：
- 物品信息：物品1（v=1,w=2）、物品2（v=2,w=4）、物品3（v=3,w=4）、物品4（v=4,w=5）


## 一、二维数组解法（f[i][j]）
`f[i][j]` 表示前i件物品在容量j下的最大价值，表格行代表物品数i（0~4），列代表容量j（0~5）。

| i\j        | 0（容量0） | 1（容量1）   | 2（容量2）   | 3（容量3）   | 4（容量4）   | 5（容量5）   |
| ---------- | ------ | -------- | -------- | -------- | -------- | -------- |
| **0（无物品）** | 0      | 0        | 0        | 0        | 0        | 0        |
| **1（物品1）** | 0      | 2（选物品1）  | 2（选物品1）  | 2（选物品1）  | 2（选物品1）  | 2（选物品1）  |
| **2（物品2）** | 0      | 2（不选物品2） | 4（选物品2）  | 6（物品1+2） | 6（物品1+2） | 6（物品1+2） |
| **3（物品3）** | 0      | 2（不选物品3） | 4（不选物品3） | 6（不选物品3） | 6（不选物品3） | 8（物品2+3） |
| **4（物品4）** | 0      | 2（不选物品4） | 4（不选物品4） | 6（不选物品4） | 6（不选物品4） | 8（不选物品4） |

### 关键步骤解析：
1. **i=1（物品1）**：  
   容量≥1时，选物品1价值最大（2），故j=1~5均为2。
   
2. **i=2（物品2）**：  
   - j=2：选物品2（价值4）＞选物品1（价值2），故f[2][2]=4。  
   - j=3：选物品1+2（1+2=3，价值2+4=6），故f[2][3]=6。

3. **i=3（物品3）**：  
   - j=5：选物品2+3（2+3=5，价值4+4=8）＞之前的6，故f[3][5]=8。

4. **i=4（物品4）**：  
   - j=5：选物品4需容量4，剩余1容量价值2，总价值5+2=7＜8，故保持8。


## 二、一维数组解法（f[j]，逆序遍历）
`f[j]` 表示当前状态下容量j的最大价值，初始为`[0,0,0,0,0,0]`，逆序更新（j从5到v[i]）。

| 步骤 | 处理物品 | 更新范围（j） | 更新后f数组（索引0~5） | 关键计算逻辑 |
|------|----------|---------------|------------------------|--------------|
| 初始 | 无 | - | [0,0,0,0,0,0] | - |
| 1 | 物品1（v=1） | j=5→1 | [0,2,2,2,2,2] | f[j] = max(f[j], f[j-1]+2) |
| 2 | 物品2（v=2） | j=5→2 | [0,2,4,6,6,6] | - j=5：max(2, f[3]+4=6)→6<br>- j=2：max(2, f[0]+4=4)→4 |
| 3 | 物品3（v=3） | j=5→3 | [0,2,4,6,6,8] | - j=5：max(6, f[2]+4=8)→8<br>- j=3：max(2, f[0]+4=4)→6（不变） |
| 4 | 物品4（v=4） | j=5→4 | [0,2,4,6,6,8] | - j=5：max(8, f[1]+5=7)→8<br>- j=4：max(6, f[0]+5=5)→6（不变） |

### 关键步骤解析：
- **逆序遍历的作用**：每次更新j时，`f[j-v[i]]` 仍为上一轮状态（未被本轮修改），确保物品只选一次。  
- 最终`f[5]=8`，与二维解法结果一致。


## 三、一维正向遍历的错误对比（表格展示）
若对物品1（v=1,w=2）正向遍历（j=1→5），会导致重复选择：

| 步骤 | 处理物品1（正向遍历j=1→5） | 更新后f数组 | 错误原因 |
|------|---------------------------|-------------|----------|
| 初始 | - | [0,0,0,0,0,0] | - |
| j=1 | f[1] = max(0, f[0]+2)=2 | [0,2,0,0,0,0] | 正确（选1次） |
| j=2 | f[2] = max(0, f[1]+2)=4 | [0,2,4,0,0,0] | 错误（物品1被选2次） |
| j=3 | f[3] = max(0, f[2]+2)=6 | [0,2,4,6,0,0] | 错误（物品1被选3次） |
| j=4 | f[4] = max(0, f[3]+2)=8 | [0,2,4,6,8,0] | 错误（物品1被选4次） |
| j=5 | f[5] = max(0, f[4]+2)=10 | [0,2,4,6,8,10] | 错误（物品1被选5次） |

### 错误根源：
正向遍历中，`f[j-v[i]]` 已被本轮更新（如j=2时用了j=1的新值），导致物品被重复选取，违背01背包“仅选一次”的约束。