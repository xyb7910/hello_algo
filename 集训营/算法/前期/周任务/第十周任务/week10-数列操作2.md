# week10-数列操作2

## 题目背景

abslime的端午假期任务是对数列执行大量批量操作，但是由于操作量太大了，abslime完成这些操作越来越力不从心，他希望你能帮他写一个程序来执行对数列的操作……

## 题目描述

给定一个长度为 $N$ 的数列 $A$，数列中第 $i$ 个数为 $A_i$。

有 $M$ 次操作，每次操作形如：

- `1 x y z` 表示将数列 $A$ 第 $x$ 个数到第 $y$ 个数这一段区间的所有数都修改为 $z$，即将 $A_x,A_{x+1},\ldots,A_y$ 都修改为 $z$。

- `2 x y z` 表示将数列 $A$ 第 $x$ 个数到第 $y$ 个数这一段区间的所有数都加上 $z$，即将 $A_x,A_{x+1},\ldots,A_y$ 都加上 $z$。（$z$ 可能为负数，此时的操作效果相当于减去 $z$ 的绝对值）。

- `3 x y` 表示求出当前数列 $A$ 第 $x$ 个数到第 $y$ 个数这一段区间中，出现了多少种不同的数，即求出 $A_x,A_{x+1},\ldots,A_y$ 这一些数中出现了多少种不同的数。

- `4 x y` 表示求出当前数列 $A$ 第 $x$ 个数到第 $y$ 个数这一段区间中，出现次数最多的数出现了多少次，即求出 $A_x,A_{x+1},\ldots,A_y$ 这一些数中出现次数最多的数出现了多少次。

## 输入格式

输入的第一行包括两个整数 $N$ 和 $M$。

输入的第二行包括 $N$ 个整数 $A_i$。

接下来 $M$ 行，每一行可能会输入 $3$ 个或 $4$ 个数字。

如果第一个数字是 $1$，后面就再输入 $3$ 个数字 $x,y, z$，表示将数列 $A$ 第 $x$ 个数到第 $y$ 个数这一段区间的所有数都修改为 $z$，即将 $A_x,A_{x+1},\ldots,A_y$ 都修改为 $z$。

如果第一个数字是 $2$，后面就再输入 $3$ 个数字 $x,y, z$，表示将数列 $A$ 第 $x$ 个数到第 $y$ 个数这一段区间的所有数都加上 $z$，即将 $A_x,A_{x+1},\ldots,A_y$ 都加上 $z$。（$z$ 可能为负数，此时的操作效果相当于减去 $z$ 的绝对值）。

如果第一个数字是 $3$，后面就再输入 $2$ 个数字 $x,y$，表示求出当前数列 $A$ 第 $x$ 个数到第 $y$ 个数这一段区间中，出现了多少种不同的数，即求出 $A_x,A_{x+1},\ldots,A_y$ 这一些数中出现了多少种不同的数。

如果第一个数字是 $4$，后面就再输入 $2$ 个数字 $x,y$，表示求出当前数列 $A$ 第 $x$ 个数到第 $y$ 个数这一段区间中，出现次数最多的数出现了多少次，即求出 $A_x,A_{x+1},\ldots,A_y$ 这一些数中出现次数最多的数出现了多少次。

## 输出格式

对于每一个形如 `3 x y` 和 `4 x y` 的操作，输出一行，该行包括一个整数，表示对于该询问需要求出的答案。

## 样例 #1

### 样例输入 #1

```
6 8
1 2 3 4 5 6
3 2 4
4 2 5
1 4 5 5
3 1 6
4 1 6
2 1 2 4
3 1 6
4 1 6
```

### 样例输出 #1

```
3
1
5
2
3
3
```

## 样例 #2

### 样例输入 #2

```
10 12
0 0 0 0 0 0 0 0 0 0
3 1 10
4 1 10
2 3 6 4
3 1 10
4 1 10
1 4 8 5
3 2 9
4 2 9
1 7 10 3
3 1 10
4 1 10
4 2 8
```

### 样例输出 #2

```
1
10
2
6
3
5
4
4
3
```

## 提示

| 数据点编号 |   $N,M$   |    特殊性质     |
| :--------: | :-------: | :-------------: |
|     1      | $\le 20$  |  只有 $3$ 操作  |
|     2      | $\le 20$  |  只有 $4$ 操作  |
|     3      | $\le 20$  | 只有 $3,4$ 操作 |
|     4      | $\le 20$  |  没有 $1$ 操作  |
|     5      | $\le 20$  |  没有 $2$ 操作  |
|     6      | $\le 20$  |       无        |
|     7      | $\le 100$ |  只有 $3$ 操作  |
|     8      | $\le 100$ |  只有 $4$ 操作  |
|     9      | $\le 100$ | 只有 $3,4$ 操作 |
|     10     | $\le 100$ |  没有 $1$ 操作  |
|     11     | $\le 100$ |  没有 $2$ 操作  |
|     12     | $\le 100$ |       无        |
|     13     | $\le 300$ |  只有 $3$ 操作  |
|     14     | $\le 300$ |  只有 $4$ 操作  |
|     15     | $\le 300$ | 只有 $3,4$ 操作 |
|     16     | $\le 300$ |  没有 $1$ 操作  |
|     17     | $\le 300$ |  没有 $2$ 操作  |
|     18     | $\le 300$ |       无        |
|     19     | $\le 500$ | 只有 $3,4$ 操作 |
|     20     | $\le 500$ |       无        |

对于所有数据，$1 \le N,M \le 500, 0 \le A_i \le 1000,1 \le x \le y \le N,-1000 \le z \le 1000$。