# week3-数列操作

## 题目背景

abslime的五一任务是对数列执行大量批量操作，但是由于操作量太大了，abslime完成这些操作越来越力不从心，他希望你能帮他写一个程序来执行对数列的操作……

## 题目描述

给定一个长度为 $N$ 的数列 $A$，数列中第 $i$ 个数为 $A_i$。

有 $M$ 次操作，每次操作形如：

- `1 x y z` 表示将数列 $A$ 中所有大小在 $x$ 到 $y$ 之间（包括 $x$ 和 $y$ 本身）的数都修改为 $z$。

- `2 x y z` 表示将数列 $A$ 中所有大小在 $x$ 到 $y$ 之间（包括 $x$ 和 $y$ 本身）的数都加上 $z$（$z$ 可能为负数，此时的操作效果相当于减去 $z$ 的绝对值）。

- `3 x y` 表示求出当前数列 $A$ 大小在 $x$ 到 $y$ 之间（包括 $x$ 和 $y$ 本身）的数有多少个。

## 输入格式

输入的第一行包括两个整数 $N$ 和 $M$。

输入的第二行包括 $N$ 个整数 $A_i$。

接下来 $M$ 行，每一行可能会输入 $3$ 个或 $4$ 个数字。

如果第一个数字是 $1$，后面就再输入 $3$ 个数字 $x,y, z$，表示将数列 $A$ 中所有大小在 $x$ 到 $y$ 之间（包括 $x$ 和 $y$ 本身）的数都修改为 $z$。

如果第一个数字是 $2$，后面就再输入 $3$ 个数字 $x,y, z$，表示将数列 $A$ 中所有大小在 $x$ 到 $y$ 之间（包括 $x$ 和 $y$ 本身）的数都加上 $z$（$z$ 可能为负数，此时的操作效果相当于减去 $z$ 的绝对值）。

如果第一个数字是 $3$，后面就再输入 $2$ 个数字 $x,y$，表示求出当前数列 $A$ 大小在 $x$ 到 $y$ 之间（包括 $x$ 和 $y$ 本身）的数有多少个。

## 输出格式

对于每一个形如 `3 x y` 的操作，输出一行，该行包括一个整数，表示当前数列 $A$ 大小在 $x$ 到 $y$ 之间（包括 $x$ 和 $y$ 本身）的数有多少个。

## 样例 #1

### 样例输入 #1

```
6 7
1 2 3 4 5 6
3 1 6
3 2 4
1 1 3 5
3 4 5
2 5 6 -1
3 4 5
3 5 5
```

### 样例输出 #1

```
6
3
5
6
1
```

## 样例 #2

### 样例输入 #2

```
5 6
8 3 4 7 2
3 2 5
3 6 8
1 7 7 5
3 2 5
2 2 3 1
3 4 4
```

### 样例输出 #2

```
3
2
4
2
```

## 提示

对于 $20\%$ 的数据，$1 \le N,M \le 20$；

对于 $40\%$ 的数据，$1 \le N,M \le 100$；

对于 $60\%$ 的数据，$1 \le N \le 10000$；

对于另外的 $20\%$ 的数据，只有 `3 x y` 操作。

对于所有数据，$1 \le N \le 1000000, 1 \le M \le 10000,0 \le A_i \le 1000,-1000000 \le x \le y \le 1000000,-1000 \le z \le 1000$。